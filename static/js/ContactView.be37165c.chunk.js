"use strict";(self.webpackChunkcontact_info=self.webpackChunkcontact_info||[]).push([[664],{794:function(e,r,n){n.r(r),n.d(r,{default:function(){return C}});var a=n(439),t=n(791),c=n(689),s=n(522),l=n(413);function o(e,r){if(null==e)return{};var n,a,t=function(e,r){if(null==e)return{};var n,a,t={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],r.indexOf(n)>=0||(t[n]=e[n]);return t}(e,r);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(t[n]=e[n])}return t}var i=n(184),u=["id","className"];var d=function(e){var r=e.id,n=e.className,a=o(e,u);return(0,i.jsx)("input",(0,l.Z)({id:r,type:"text",className:"border border-gray-300 px-1 ".concat(n)},a))};var f=function(e){e.id;var r=e.label,n=e.value,a=e.checked,t=e.className,c=e.onChange;return(0,i.jsxs)("label",{className:"inline-flex hover:cursor-pointer ".concat(t),children:[(0,i.jsx)("input",{type:"radio",value:n,checked:a,onChange:c,className:"mr-2"}),r]})};var v=function(e){var r=e.placeholder,n=void 0===r?"--":r,c=e.customLabel,s=e.className,l=e.children,o=(0,t.useState)(!1),u=(0,a.Z)(o,2),d=u[0],f=u[1];function v(e){e.stopPropagation(),f(!1)}return(0,t.useEffect)((function(){return d?document.body.addEventListener("click",v):document.body.removeEventListener("click",v),function(){document.body.removeEventListener("click",v)}}),[d]),(0,i.jsxs)("div",{className:"relative ".concat(s),children:[(0,i.jsx)("div",{className:"hover:cursor-pointer border border-gray-300 rounded-sm p-1 w-40",onClick:function(e){e.stopPropagation(),f(!d)},children:c&&c()||n}),d&&(0,i.jsx)("div",{className:"absolute min-h-[10px] bg-white border border-gray-300 hover:cursor-pointer w-40 py-2 z-10",onClick:function(e){return e.stopPropagation()},children:l&&l(f)})]})};var h=function(e){var r=e.radios,n=e.placeholder,c=e.className,s=e.onChange,l=(0,t.useState)(""),o=(0,a.Z)(l,2),u=o[0],d=o[1];function h(e,r){s&&s(e.target.value),r(!1),d(e.target.value)}var m=(0,t.useCallback)((function(e){s&&s(),e.stopPropagation(),d("")}),[s]),p=(0,t.useCallback)((function(){if(u){var e=r.find((function(e){return e.value===u}));return(0,i.jsxs)("div",{className:"flex justify-between",children:[null===e||void 0===e?void 0:e.label,(0,i.jsx)("button",{onClick:m,children:"X"})]})}return""}),[r,u,m]);return(0,i.jsx)(v,{className:c,placeholder:n,customLabel:p,children:function(e){return(0,i.jsx)("div",{className:"flex flex-col space-y-2 mb-4",children:r.map((function(r){return(0,i.jsx)(f,{className:"pl-2 hover:bg-blue-100",label:r.label,value:r.value,checked:u===r.value,onChange:function(r){return h(r,e)}},r.value)}))})}})};var m=function(e){var r=e.className,n=e.setFilter;return(0,i.jsxs)("div",{className:"px-4 pb-5 ".concat(r),children:[(0,i.jsx)("h2",{className:"text-xl mb-2",children:"Contact"}),(0,i.jsx)(d,{placeholder:"Search Characters",id:"character_search",className:"mb-2",onInput:function(e){n((function(r){return(0,l.Z)((0,l.Z)({},r),{},{keyword:e.target.value})}))}}),(0,i.jsxs)("div",{className:"flex",children:[(0,i.jsx)(h,{placeholder:"Status",radios:[{label:"Alive",value:"Alive"},{label:"Dead",value:"Dead"},{label:"Unknown",value:"unknown"}],className:"mr-2",onChange:function(e){n((function(r){return(0,l.Z)((0,l.Z)({},r),{},{status:e})}))}}),(0,i.jsx)(h,{placeholder:"Gender",radios:[{label:"Male",value:"Male"},{label:"Female",value:"Female"},{label:"Genderless",value:"Genderless"},{label:"Unknown",value:"unknown"}],onChange:function(e){n((function(r){return(0,l.Z)((0,l.Z)({},r),{},{gender:e})}))}})]})]})},p=n(433),b=n(165),x=n(861),g=n(662),j=n(87),N=["character","className"];var y=function(e){var r=e.character,n=e.className,a=o(e,N),c=(0,t.useContext)(s.Z).setCharacter;return(0,i.jsxs)(j.OL,(0,l.Z)((0,l.Z)({to:String(r.id),className:"py-4 px-4 flex items-center ".concat(n),onClick:function(e){e.stopPropagation(),c(r)}},a),{},{children:[(0,i.jsx)("img",{src:r.image,alt:"Avatar",width:"100",height:"100",className:"rounded-full mr-6"}),(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsx)("span",{className:"mb-2",children:r.name}),(0,i.jsx)("span",{children:r.species})]})]}))};var k=function(e){var r=e.filter,n=(0,t.useState)("https://rickandmortyapi.com/api/character"),c=(0,a.Z)(n,2),s=c[0],l=c[1],o=(0,t.useState)(null),u=(0,a.Z)(o,2),d=u[0],f=u[1],v=(0,t.useState)([]),h=(0,a.Z)(v,2),m=h[0],j=h[1],N=(0,t.useState)([]),k=(0,a.Z)(N,2),Z=k[0],w=k[1],C=(0,t.useState)([]),S=(0,a.Z)(C,2),L=S[0],O=S[1],E=(0,t.useMemo)((function(){var e={root:document.querySelector("#characterListContainer"),rootMargin:"0px",threshold:0};return new IntersectionObserver((function(e){e[0].isIntersecting&&(d&&l(d.next),console.log("The item enters the viewpoint"))}),e)}),[d]);return(0,t.useEffect)((function(){var e,r=null===(e=L[L.length-1])||void 0===e?void 0:e.id;if(r){var n=document.querySelector("#character_".concat(r));E.observe(n)}}),[L,E]),(0,t.useEffect)((function(){function e(){return e=(0,x.Z)((0,b.Z)().mark((function e(){var r,n,a;return(0,b.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.Z.CHARACTER.getAll(s);case 2:r=e.sent,n=r.info,a=r.characters,j(a),f(n);case 7:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[s]),(0,t.useEffect)((function(){w((function(e){return[].concat((0,p.Z)(e),(0,p.Z)(m))}))}),[m]),(0,t.useEffect)((function(){if(Object.keys(r).length){var e=Z.filter((function(e){return(!r.keyword||e.name.toLowerCase().includes(r.keyword.toLowerCase()))&&(!r.status||e.status===r.status)&&(!r.gender||e.gender===r.gender)}));O(e)}else O(Z)}),[r,Z]),(0,i.jsx)("div",{id:"characterListContainer",className:"h-full overflow-auto",children:L.map((function(e,r){return(0,i.jsx)(y,{id:"character_".concat(e.id),character:e,className:"hover:cursor-pointer hover:bg-blue-100 ".concat(r!==L.length-1?"border-b border-gray-300":"")},e.id)}))})},Z=["className"],w=(0,t.memo)((function(e){var r=e.className,n=o(e,Z),c=(0,t.useState)({}),s=(0,a.Z)(c,2),u=s[0],d=s[1];return(0,i.jsxs)("div",(0,l.Z)((0,l.Z)({className:"flex flex-col overflow-hidden ".concat(r)},n),{},{children:[(0,i.jsx)(m,{className:" border-b border-gray-300",setFilter:d}),(0,i.jsx)(k,{className:"flex-auto",filter:u})]}))}));var C=function(){var e=(0,t.useState)(null),r=(0,a.Z)(e,2),n=r[0],l=r[1];return(0,i.jsx)(s.Z.Provider,{value:{character:n,setCharacter:l},children:(0,i.jsxs)("div",{className:"grid grid-cols-contact overflow-hidden",children:[(0,i.jsx)(w,{className:"border-r border-gray-300"}),(0,i.jsx)(t.Suspense,{fallback:(0,i.jsx)("div",{children:"Page is Loading..."}),children:(0,i.jsx)(c.j3,{})})]})})}}}]);
//# sourceMappingURL=ContactView.be37165c.chunk.js.map